<h2>gmap</h2>

    <!-- 地名入力用のinputを追加 -->
    <input id="address" type="textbox" value="Sydney, NSW">

    <!-- buttonをクリックしたらcodeAddressを実行　-->
    <input type="button" value="Encode" onclick="codeAddress()">
    <div id='map'>
    </div>

    <style>
    #map{
      height: 400px;
      width: 700px;
    }
    </style>

    <script>
    /*
    mapを関数の外で定義(codeAddressでも使うため)
    geocoderを用意
    */

    let map
    let geocoder

    function initMap(){
      // geocoderを初期化
      geocoder = new google.maps.Geocoder()

      map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: -34.397, lng: 150.644},
      zoom: 10
      });
    }

    function codeAddress(){
      // 入力を取得
      let inputAddress = document.getElementById('address').value;

      // geocodingしたあとmapを移動
      geocoder.geocode( { 'address': inputAddress}, function(results, status) {
        if (status == 'OK') {
    　　　　　　　　　　　　// map.setCenterで地図が移動
          map.setCenter(results[0].geometry.location);

    　　　　　　　　　　　　// google.maps.MarkerでGoogleMap上の指定位置にマーカが立つ
          var marker = new google.maps.Marker({
              map: map,
              position: results[0].geometry.location
          });
        } else {
          alert('Geocode was not successful for the following reason: ' + status);
        }
      });
    }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["GOOGLE_API_KEY"]%>&callback=initMap" async defer></script>



<div>
    <p><%= link_to @post.user.name , user_path(@post.user_id) %></p>
    <p>国名:<%= Country.find(@post.country_id).country %></p>
    <p>期間:<%= @post.depature_date %> ~ <%= @post.return_date %></p>
    <p><%= attachment_image_tag @post, :image, :fill, 100, 100 %></p>
    <p>ビザ:<% if @post.visa %>◯<% else %>×<% end %></p>
    <p>ワクチン:<%= Vaccine.find(@post.vaccine_id).name %></p>
    <p>メモ:<%= @post.memo %></p>
</div>

<div>
    <h4>コメント</h4>
    <div id="comments_area">
      <%= render partial: 'comments/index', locals: { comments: @comments } %>
    </div>
    <% if user_signed_in? %>
      <%= render partial: 'comments/form', locals: { comment: @comment, post: @post } %>
    <% end %>
</div>

<% if @post.user_id == current_user.id %>
	<%= link_to "Edit", edit_post_path %>
	<%= link_to "Destroy", post_path ,  method: :delete ,"data-confirm" => "本当に削除しますか？"%>
<% end %>





